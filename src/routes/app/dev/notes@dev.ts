// @ts-ignore
import data from '$lib/data/questions';

//@ts-ignore
export async function post({request}: RequestEvent){
    const frmData = await request.formData();
    const {username, password} = Object.fromEntries(frmData);

    if(username === 'developer' && password === 't3mpD3vP4ssw0rd'){

        let question = data.Questions.filter((x: { Id: any; }) => x.Id == 5)[0];

        return {
            status: 201,
            body: {
                data: Buffer.from(question.Flag).toString('base64')
            }
        }
    } else {
        return {
            status: 303,
            headers:{
                location: '/app/dev'
            }
        }
    }
}