import { serialize } from 'cookie';

/** @type {import('@sveltejs/kit').RequestHandler} */
// @ts-ignore
export async function post(event: RequestEvent){
    const frmData = await event.request.json();
    
    if (frmData.username !== 'AppAdmin' && frmData.password !== 'password12345') {
     return {
         status: 401,
         body: {
             message: 'Incorrect user or password',
         },
     };
    }

    return {
     status: 200,
     headers: {
         'Set-Cookie': serialize('session', JSON.stringify({id: 'adminsession123456789', isOwner: false}), {
             path: '/',
             httpOnly: true,
             sameSite: "lax",
             maxAge: 60 * 60 * 2,
         }),
     }
    };
}